window.OnePebbleApp={Models:{},Collections:{},Views:{},Routers:{},init:function(){"use strict"}},$(document).ready(function(){"use strict";OnePebbleApp.init()}),this.JST=this.JST||{},this.JST["app/scripts/templates/card.ejs"]=function(a){var b="";_.escape;return b+=""},this.JST["app/scripts/templates/doctor.ejs"]=function(a){var b,c="";_.escape,Array.prototype.join;return c+='<p>Your content here.</p>\n<p>The data was mocked by app/scripts/mock_inject.js</p>\n\n<div class="row">\n    <div class="col-xs-12">\n        <ul id="doctorUl">\n            ',_.each(doctors,function(a,d){c+='\n            <li data-id="'+(null==(b=a._id)?"":b)+'">\n                <div class="row">\n                    <div class="col-xs-2">\n                        <img src="'+(null==(b=a.image)?"":b)+'" width="160" height="90"/>\n                    </div>\n                    <div class="col-xs-10">\n                        <h3>'+(null==(b=a.name)?"":b)+"</h3>\n                        <p> &#xf100; "+(null==(b=a.email)?"":b)+"</p>\n                    </div>\n                </div>\n            </li>\n            "}),c+="\n        </ul>\n    </div>\n</div>\n"},this.JST["app/scripts/templates/fund.ejs"]=function(a){var b,c="";_.escape,Array.prototype.join;return c+='<nav class="subpage">\n    <div class="nav-wrapper">\n    </div>\n</nav>\n<div class="background-'+(null==(b=Math.floor(3*Math.random())+1)?"":b)+' bg-image">\n    <div class="container fund">\n        <div class="row header-row">\n            <div class="col s12 valign-wrapper center-align" style="height: 220px">\n                <h3 class="fund-name center-align">'+(null==(b=a.fund.fund)?"":b)+'</h3>\n            </div>\n        </div>\n\n        <div class="row category-filter">\n            <div class="col s12">\n\n            </div>\n        </div>\n\n        <div class="card sticky-action">\n            <div class="card-content">\n                <h5>Fund Metrics</h5>\n                <div class="row">\n                    ',_.each(a.fund.categoryData,function(a,d,e){c+='\n                    <div class="col s6 m4 l2 center-align">\n                        <i class="material-icons icons '+(null==(b=d+" "+a.level)?"":b)+'">'+(null==(b=d)?"":b)+'</i>\n                        <p class="fund-metrics">'+(null==(b=a.name)?"":b)+'</p>\n                        <div class="tip center-align" data-tip="'+(null==(b=a.description)?"":b)+'">\n                            <i class="material-icons">info</i>\n                        </div>\n                    </div>\n                    '}),c+='\n                </div>\n            </div>\n        </div>\n\n        <div class="row category-filter">\n            <div class="col s12">\n                <h4 class="section-title">Alternate Funds</h4>\n            </div>\n            <div class="col s12">\n                <h5 class="section-description">Find similar funds to this ETF.</h5>\n            </div>\n        </div>\n\n        <ul class="row">\n\n            <li class="col s12 m6 l4">\n                <div class="card hoverable" data-id="ACSI">\n                    <h3 class="card-title ticker background-2">ACSI</h3>\n                    <div class="card-content center-align">\n                        <h5 class="fund-name">American Customer Satisfaction Core Alpha ETF</h5>\n                        <h5 class="fund-type left-align"><i class="material-icons">pie_chart_outlined</i> Equity: U.S. - Large Cap</h5>\n                        <h6 class="asset-class">Class: Developed Markets</h6>\n                    </div>\n                    <div class="card-action">\n                        <a href="#">Look inside fund</a>\n                    </div>\n                </div>\n            </li>\n\n            <li class="col s12 m6 l4">\n                <div class="card hoverable" data-id="ALFA">\n                    <h3 class="card-title ticker background-1">ALFA</h3>\n                    <div class="card-content center-align">\n                        <h5 class="fund-name">AlphaClone Alternative Alpha ETF</h5>\n                        <h5 class="fund-type left-align"><i class="material-icons">pie_chart_outlined</i> Equity: U.S.  -  Total Market</h5>\n                        <h6 class="asset-class">Class: Developed Markets</h6>\n                    </div>\n                    <div class="card-action">\n                        <a href="#">Look inside fund</a>\n                    </div>\n                </div>\n            </li>\n\n            <li class="col s12 m6 l4">\n                <div class="card hoverable" data-id="BFOR">\n                    <h3 class="card-title ticker background-2">BFOR</h3>\n                    <div class="card-content center-align">\n                        <h5 class="fund-name">ALPS Barron\'s 400 ETF</h5>\n                        <h5 class="fund-type left-align"><i class="material-icons">pie_chart_outlined</i> Equity: U.S.  -  Total Market</h5>\n                        <h6 class="asset-class">Class: Developed Markets</h6>\n                    </div>\n                    <div class="card-action">\n                        <a href="#">Look inside fund</a>\n                    </div>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>'},this.JST["app/scripts/templates/funds.ejs"]=function(a){var b,c="";_.escape,Array.prototype.join;return c+='<nav class="subpage">\n    <div class="nav-wrapper">\n    </div>\n</nav>\n<div class="bg-image background-'+(null==(b=Math.floor(3*Math.random())+1)?"":b)+'">\n    <div class="listview">\n        <div class="row header-row">\n            <div class="col s12 valign-wrapper" style="height: 310px">\n                <!--div class="ticker-container card-panel">\n                    <header class="ticker center-align">Ticker</header>\n                    <h4 class="card-title">APPL</h4>\n                </div-->\n                <h2 class="fund-name center">Funds investing in <span class="company-search">'+(null==(b=a.searchId)?"":b)+'</span></h2>\n            </div>\n        </div>\n        <div class="row tiddy-bottom">\n            <div class="col s12 m4 l3 filter-col"> <!-- Note that "m4 l3" was added -->\n                <div class="row filter-title">\n                    <div class="col s6"><h4>Filter</h4></div>\n                    <div class="col s6"><a class="waves-effect waves-light btn right-align clear-all-filters">Clear All Filters</a></div>\n                </div>\n\n                <form>\n                    <h5>Fund Size</h5>\n                    <div class="ranger">\n                        <div id="fund-size-slider"></div>\n                        <span class="range-val left" id="fund-size-lower"></span>\n                        <span class="range-val right" id="fund-size-upper"></span>\n                    </div>\n\n                    <h5>Expenses</h5>\n                    <div class="ranger">\n                        <div id="expense-slider"></div>\n                        <span class="range-val left" id="expense-lower"></span>\n                        <span class="range-val right" id="expense-upper"></span>\n                    </div>\n\n                    <h5>5Y Returns</h5>\n                    <div class="ranger">\n                        <div id="returns-slider"></div>\n                        <span class="range-val left" id="returns-lower"></span>\n                        <span class="range-val right" id="returns-upper"></span>\n                    </div>\n\n                    <h5>Dividends</h5>\n                    <div class="ranger">\n                        <div id="dividend-slider"></div>\n                        <span class="range-val left" id="dividend-lower"></span>\n                        <span class="range-val right" id="dividend-upper"></span>\n                    </div>\n\n                    <h5>Category</h5>\n                    <div class="input-field category-select">\n                        <select id="category-dd">\n                            <option value="all" selected>All</option>\n                            <option value="Size and Style">Size and Style</option>\n                            <option value="Broad Market">Broad Market</option>\n                            <option value="U.S. Government">U.S. Government</option>\n                            <option value="Sector">Sector</option>\n                            <option value="Asset Allocation">Asset Allocation</option>\n                            <option value="Corporate">Corporate</option>\n                            <option value="Taxable Municipals">Taxable Municipals</option>\n                            <option value="Government/Credit">Government/Credit</option>\n                            <option value="Tactical Tools">Tactical Tools</option>\n                            <option value="Absolute Returns">Absolute Returns</option>\n                            <option value="Municipals">Municipals</option>\n                            <option value="High Dividend Yield">High Dividend Yield</option>\n                        </select>\n                    </div>\n\n                    <h5>Focus</h5>\n                    <div class="input-field">\n                        <select id="focus-dd">\n                            <option value="all" selected>All</option>\n                            <option value="Large Cap">Large Cap</option>\n                            <option value="Total Market">Total Market</option>\n                            <option value="Investment Grade">Investment Grade</option>\n                            <option value="Broad Market">Broad Market</option>\n                            <option value="Agencies">Agencies</option>\n                            <option value="Industrials">Industrials</option>\n                            <option value="Energy">Energy</option>\n                            <option value="Target Outcome">Target Outcome</option>\n                            <option value="High Yield">High Yield</option>\n                            <option value="Health Care">Health Care</option>\n                            <option value="Financials">Financials</option>\n                            <option value="Treasury">Treasury</option>\n                            <option value="Spreads">Spreads</option>\n                            <option value="Long/Short">Long/Short</option>\n                            <option value="Small Cap">Small Cap</option>\n                            <option value="Consumer Cyclicals">Consumer Cyclicals</option>\n                            <option value="Asset-backed">Asset-backed</option>\n                            <option value="Consumer Non-cyclicals">Consumer Non-cyclicals</option>\n                            <option value="Convertibles">Convertibles</option>\n                            <option value="Mid Cap">Mid Cap</option>\n                            <option value="High Dividend Yield">High Dividend Yield</option>\n                            <option value="Real Estate">Real Estate</option>\n                            <option value="Preferred Stock">Preferred Stock</option>\n                            <option value="Telecommunications">Telecommunications</option>\n                            <option value="Micro Cap">Micro Cap</option>\n                            <option value="Technology">Technology</option>\n                            <option value="Theme">Theme</option>\n                            <option value="Basic Materials">Basic Materials</option>\n                            <option value="Utilities">Utilities</option>\n                            <option value="Agency MBS">Agency MBS</option>\n                            <option value="Global Macro">Global Macro</option>\n                            <option value="TIPS">TIPS</option>\n                            <option value="Extended Market">Extended Market</option>\n                            <option value="Volatility">Volatility</option>\n                            <option value="VRDO">VRDO</option>\n                        </select>\n                    </div>\n\n\n                    <h5>Niche</h5>\n                    <div class="input-field">\n                        <select id="niche-dd">\n                            <option value="all" selected>All</option>\n                            <option value="Broad-based">Broad-based</option>\n                            <option value="Broad Maturities">Broad Maturities</option>\n                            <option value="MLPs">MLPs</option>\n                            <option value="Income">Income</option>\n                            <option value="Short-Term">Short-Term</option>\n                            <option value="Biotech">Biotech</option>\n                            <option value="Private Equity">Private Equity</option>\n                            <option value="Capital Appreciation">Capital Appreciation</option>\n                            <option value="Ultra-Short Term">Ultra-Short Term</option>\n                            <option value="Intermediate">Intermediate</option>\n                            <option value="Floating Rate">Floating Rate</option>\n                            <option value="Long-Term">Long-Term</option>\n                            <option value="Long/Short Volatility">Long/Short Volatility</option>\n                            <option value="Long/Short Equity">Long/Short Equity</option>\n                            <option value="Homebuilding">Homebuilding</option>\n                            <option value="Aerospace & Defense">Aerospace & Defense</option>\n                            <option value="Banks">Banks</option>\n                            <option value="Oil & Gas Exploration & Production">Oil & Gas Exploration & Production</option>\n                            <option value="Value">Value</option>\n                            <option value="Growth">Growth</option>\n                            <option value="Natural Gas">Natural Gas</option>\n                            <option value="Internet">Internet</option>\n                            <option value="Water">Water</option>\n                            <option value="Yield Curve">Yield Curve</option>\n                            <option value="Retail">Retail</option>\n                            <option value="Food and Beverage">Food and Beverage</option>\n                            <option value="Pharmaceuticals">Pharmaceuticals</option>\n                            <option value="Semiconductors">Semiconductors</option>\n                            <option value="Oil & Gas">Oil & Gas</option>\n                            <option value="Transportation">Transportation</option>\n                            <option value="Tactical Asset Allocation">Tactical Asset Allocation</option>\n                            <option value="Banking and Investment Services">Banking and Investment Services</option>\n                            <option value="Insurance">Insurance</option>\n                            <option value="Oil & Gas Equipment & Services">Oil & Gas Equipment & Services</option>\n                            <option value="Health Care Providers & Services">Health Care Providers & Services</option>\n                            <option value="Health Care Equipment & Supplies">Health Care Equipment & Supplies</option>\n                            <option value="S&P 500 Short-Term">S&P 500 Short-Term</option>\n                            <option value="Financial Services">Financial Services</option>\n                            <option value="Restaurants & Bars">Restaurants & Bars</option>\n                            <option value="Mortgages">Mortgages</option>\n                            <option value="Infrastructure">Infrastructure</option>\n                            <option value="Media & Publishing">Media & Publishing</option>\n                            <option value="Leisure & Recreation">Leisure & Recreation</option>\n                            <option value="Construction & Engineering">Construction & Engineering</option>\n                            <option value="Software">Software</option>\n                            <option value="Renewable Energy">Renewable Energy</option>\n                            <option value="Inflation">Inflation</option>\n                            <option value="S&P 500 Mid-Term">S&P 500 Mid-Term</option>\n                            <option value="Metals & Mining">Metals & Mining</option>\n                            <option value="Technology Equipment">Technology Equipment</option>\n                            <option value="Trend-Following">Trend-Following</option>\n                        </select>\n                    </div>\n\n                    <!--<h5>Risks</h5>-->\n                    <!--<div class="ranger">-->\n                        <!--<div id="risks-slider"></div>-->\n                        <!--<span class="range-val left" id="risks-lower"></span>-->\n                        <!--<span class="range-val right" id="risks-upper"></span>-->\n                    <!--</div>-->\n\n                    <h5>Brand</h5>\n                    <div class="input-field">\n                        <select id="brand-dd">\n                            <option value="all" selected>All</option>\n                            <option value="ACSI Funds">ACSI Funds</option>\n                            <option value="Global X">Global X</option>\n                            <option value="iShares">iShares</option>\n                            <option value="IndexIQ">IndexIQ</option>\n                            <option value="WisdomTree">WisdomTree</option>\n                            <option value="First Trust">First Trust</option>\n                            <option value="AlphaClone">AlphaClone</option>\n                            <option value="JPMorgan">JPMorgan</option>\n                            <option value="Credit Suisse">Credit Suisse</option>\n                            <option value="Alerian">Alerian</option>\n                            <option value="Amplify">Amplify</option>\n                            <option value="ETRACS">ETRACS</option>\n                            <option value="InfraCap">InfraCap</option>\n                            <option value="VanEck">VanEck</option>\n                            <option value="ArrowShares">ArrowShares</option>\n                            <option value="Barclays Capital">Barclays Capital</option>\n                            <option value="PowerShares">PowerShares</option>\n                            <option value="BioShares">BioShares</option>\n                            <option value="Aptus">Aptus</option>\n                            <option value="ALPS">ALPS</option>\n                            <option value="ProShares">ProShares</option>\n                            <option value="SPDR">SPDR</option>\n                            <option value="Vanguard">Vanguard</option>\n                            <option value="BMO">BMO</option>\n                            <option value="FlexShares">FlexShares</option>\n                            <option value="Guggenheim">Guggenheim</option>\n                            <option value="VelocityShares">VelocityShares</option>\n                            <option value="QuantShares">QuantShares</option>\n                            <option value="Principal">Principal</option>\n                            <option value="Exponential">Exponential</option>\n                            <option value="iPath">iPath</option>\n                            <option value="Pacer">Pacer</option>\n                            <option value="Cambria">Cambria</option>\n                            <option value="VictoryShares">VictoryShares</option>\n                            <option value="Direxion">Direxion</option>\n                            <option value="Loncar">Loncar</option>\n                            <option value="PIMCO">PIMCO</option>\n                            <option value="Virtus">Virtus</option>\n                            <option value="AdvisorShares">AdvisorShares</option>\n                            <option value="Deutsche X-trackers">Deutsche X-trackers</option>\n                            <option value="Reality Shares">Reality Shares</option>\n                            <option value="Diamond Hill">Diamond Hill</option>\n                            <option value="C-Tracks">C-Tracks</option>\n                            <option value="ELEMENTS">ELEMENTS</option>\n                            <option value="Davis">Davis</option>\n                            <option value="TMW Funds">TMW Funds</option>\n                            <option value="Elkhorn">Elkhorn</option>\n                            <option value="Oppenheimer">Oppenheimer</option>\n                            <option value="Columbia">Columbia</option>\n                            <option value="Etho">Etho</option>\n                            <option value="UBS">UBS</option>\n                            <option value="Fidelity">Fidelity</option>\n                            <option value="FormulaFolios">FormulaFolios</option>\n                            <option value="WeatherStorm">WeatherStorm</option>\n                            <option value="Franklin">Franklin</option>\n                            <option value="Schwab">Schwab</option>\n                            <option value="Goldman Sachs">Goldman Sachs</option>\n                            <option value="Hartford">Hartford</option>\n                            <option value="Horizons">Horizons</option>\n                            <option value="Hull">Hull</option>\n                            <option value="Strategy Shares">Strategy Shares</option>\n                            <option value="Inspire">Inspire</option>\n                            <option value="SerenityShares">SerenityShares</option>\n                            <option value="Renaissance">Renaissance</option>\n                            <option value="John Hancock">John Hancock</option>\n                            <option value="Janus Henderson">Janus Henderson</option>\n                            <option value="Legg Mason">Legg Mason</option>\n                            <option value="USCF Advisers">USCF Advisers</option>\n                            <option value="Morgan Stanley">Morgan Stanley</option>\n                            <option value="LocalShares">LocalShares</option>\n                            <option value="NuShares">NuShares</option>\n                            <option value="O\'Shares">O\'Shares</option>\n                            <option value="iSectors">iSectors</option>\n                            <option value="Alpha Architect">Alpha Architect</option>\n                            <option value="RiverFront">RiverFront</option>\n                            <option value="Sit">Sit</option>\n                            <option value="Highland">Highland</option>\n                            <option value="TETF">TETF</option>\n                            <option value="Tortoise">Tortoise</option>\n                            <option value="TrimTabs">TrimTabs</option>\n                            <option value="Tuttle">Tuttle</option>\n                            <option value="Reaves">Reaves</option>\n                            <option value="Vident">Vident</option>\n                            <option value="REX">REX</option>\n                            <option value="WBI Shares">WBI Shares</option>\n                            <option value="QuantX">QuantX</option>\n                        </select>\n                    </div>\n\n                </form>\n\n\n                <!-- Grey navigation panel\n\n                      This content will be:\n                  3-columns-wide on large screens,\n                  4-columns-wide on medium screens,\n                  12-columns-wide on small screens  -->\n\n            </div>\n\n            <div class="col s12 m8 l9"> <!-- Note that "m8 l9" was added -->\n                <div class="row">\n                    <div class="col s6">\n                        <h5>'+(null==(b=a.funds.length)?"":b)+' Funds Found</h5>\n                    </div>\n                    <div class="col s6 right-align">\n                        <ul class="pagination tiddy-bottom">\n                            <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>\n                            <li class="active"><a href="#!">1</a></li>\n                            <li class="waves-effect"><a href="#!">2</a></li>\n                            <li class="waves-effect"><a href="#!">3</a></li>\n                            <li class="waves-effect"><a href="#!">4</a></li>\n                            <li class="waves-effect"><a href="#!">5</a></li>\n                            <li class="waves-effect"><a href="#!"><i class="material-icons">chevron_right</i></a></li>\n                        </ul>\n                    </div>\n                </div>\n                <ul class="row">\n                    ',_.each(a.funds,function(a,d){c+='\n                    <li class="col s12 m6 l4">\n                        <div class="card hoverable" data-id="'+(null==(b=a.ticker)?"":b)+'">\n                            <h3 class="card-title ticker background-'+(null==(b=Math.floor(3*Math.random())+1)?"":b)+'">'+(null==(b=a.ticker)?"":b)+'</h3>\n                            <div class="card-content center-align">\n                                <h5 class="fund-name">'+(null==(b=a.fund)?"":b)+'</h5>\n                                <h5 class="fund-percent center-align">\n                                    <a class="waves-effect waves-light btn  indigo darken-4">'+(null==(b=(3.1*Math.random()+.02).toFixed(4)+"%")?"":b)+'</h5></a>\n\n                                <h5 class="fund-type center-align">\n                                    <!--<i class="material-icons">',c+="</i> ",c+="-->\n                                    "+(null==(b=a.fundBasics.segment)?"":b)+'\n                                </h5>\n                                <h6 class="asset-class">'+(null==(b=a.economicDevelopment)?"":b)+'</h6>\n                            </div>\n                            <!--<div class="card-action">-->\n                                <!--<a href="#">Look inside fund</a>-->\n                            <!--</div>-->\n                        </div>\n                    </li>\n                    '}),c+="\n                </ul>\n            </div>\n\n\n        </div>\n    </div>\n</div>"},this.JST["app/scripts/templates/search.ejs"]=function(a){var b="";_.escape,Array.prototype.join;return a.enableBrand&&(b+='\n<a href="/" class="brand-logo waves-effect waves-light btn"><img width="120" src="/images/one-pebble-logo-white.png" alt="One Pebble" class="logo"></a>\n'),b+='\n<form>\n    <div class="input-field">\n            <input id="search" class="autocomplete" type="search" placeholder="Search for a company or ticker" required>\n            <label class="label-icon" for="search"><i class="material-icons">search</i></label>\n            <i class="material-icons close">close</i>\n    </div>\n</form>'},OnePebbleApp.Models=OnePebbleApp.Models||{},function(){"use strict";OnePebbleApp.Models.Search=Backbone.Model.extend({initialize:function(){},defaults:{_id:""},validate:function(a,b){},parse:function(a,b){return console.log("parse",a),a}})}(),OnePebbleApp.Models=OnePebbleApp.Models||{},function(){"use strict";OnePebbleApp.Models.Fund=Backbone.Model.extend({initialize:function(){},url:function(){return"fund/"+this.get("ticker")},defaults:{_id:"",productId:"",fund:"",ticker:"",inceptionDate:"",launchDate:"",hasSegmentReport:"",genericReport:"",hasReport:"",fundsInSegment:"",economicDevelopment:"",totalRows:"",fundBasics:{issuer:"",expenseRatio:{value:""},aum:{value:""},spreadPct:{value:""},segment:""},performance:{priceTrAsOf:"",priceTr1MopriceTr1Mo:{value:""},priceTr3Mo:{value:""},priceTr1Yr:{value:""},priceTr3YrAnnualized:{value:""},priceTr5YrAnnualized:{value:""},priceTr10YrAnnualized:{value:""}},analysis:{analystPick:"",opportunitiesList:"",letterGrade:"",efficiencyScore:"",tradabilityScore:"",fitScore:"",leveragedFactor:"",exposureReset:"",avgDailyDollarVolume:"",avgDailyShareVolume:"",spread:{value:""},fundClosureRisk:""},fundamentals:{dividendYield:{value:""},equity:{pe:"",pb:""},fixedIncome:{duration:"",creditQuality:"",ytm:{value:""}}},classification:{assetClass:"",strategy:"",region:"",geography:"",category:"",focus:"",niche:"",inverse:"",leveraged:"",etn:"",selectionCriteria:"",weightingScheme:"",activePerSec:"",underlyingIndex:"",indexProvider:"",brand:""},tax:{legalStructure:"",maxLtCapitalGainsRate:"",maxStCapitalGainsRate:"",taxReporting:""},msciEsg:{msciEsgQualityScore:"",msciEsgQualityScorePctlPeer:"",msciEsgQualityScorePctlGlobal:"",msciWeightedAvgCarbonInten:"",msciSustainableImpactPct:"",msciSriExclusionCriteriaPct:"",msciEsgHasBadge:""},companies:[]},validate:function(a,b){},parse:function(a,b){return this.set({_id:a._id,productId:a.productId,fund:a.fund,ticker:a.ticker,inceptionDate:a.inceptionDate,launchDate:a.launchDate,hasSegmentReport:a.hasSegmentReport,genericReport:a.genericReport,hasReport:a.hasReport,fundsInSegment:a.fundsInSegment,economicDevelopment:a.economicDevelopment,totalRows:a.totalRows,fundBasics:a.fundBasics,performance:a.performance,analysis:a.analysis,fundamentals:a.fundamentals,classification:a.classification,tax:a.tax,msciEsg:a.msciEsg,companies:a.companies,categoryData:a.categoryData}),a}})}(),OnePebbleApp.Collections=OnePebbleApp.Collections||{},function(){"use strict";OnePebbleApp.Collections.Searches=Backbone.Collection.extend({url:"/search/",model:OnePebbleApp.Models.Search})}(),OnePebbleApp.Collections=OnePebbleApp.Collections||{},function(){"use strict";OnePebbleApp.Collections.Funds=Backbone.Collection.extend({initialize:function(a){this.ticker=a},url:function(){return"/funds/company/"+this.ticker},model:OnePebbleApp.Models.Fund})}(),OnePebbleApp.Views=OnePebbleApp.Views||{},function(){"use strict";OnePebbleApp.Views.Search=Backbone.View.extend({template:JST["app/scripts/templates/search.ejs"],tagName:"form",collection:new OnePebbleApp.Collections.Searches,className:"",ENTER_KEY:13,events:{keyup:"keyAction","click .close":"clearSearch",click:"clickAction"},keyAction:function(a){this.showDD();var b=$(a.target);a.which===this.ENTER_KEY?(console.log("I hit enter!"),a&&a.target&&a.target.value&&this.goToFund(a.target.value)):b&&b.hasClass("autocomplete")&&b&&this.typeahead(b.val())},clickAction:function(a){var b=$(a.target),c=this.getType(a);b&&b.parent()&&b.parent()[0]&&"LI"===b.parent()[0].tagName&&("etf"===c?this.goToFund():this.goToFundList())},getType:function(a){var b=$(a.target).parent(),c=b.find("img"),d=null;return c&&c[0]&&(d=c[0].src.split("/").pop().split(".png")[0]),console.log(d),d},getSymbol:function(){var a=$(".autocomplete").val(),b=a.split(" - ");return 0!==b.length?b=b[0]:void 0},goToFund:function(){var a=this.getSymbol();Backbone.history.navigate("fund/"+a,{trigger:!0})},goToFundList:function(){var a=this.getSymbol();Backbone.history.navigate("funds/company/"+a,{trigger:!0})},initialize:function(a){this.enableBrand=a.enableBrand},render:function(){return this.$el.html(this.template({enableBrand:this.enableBrand})),this.trigger("render","render done!"),this.typeahead(),this},typeahead:function(a){var b;window.fundArray&&(b=window.fundArray);$.ajax({type:"GET",url:"/search/"+a,success:function(a){b||(b=a);for(var c={},d=0;d<b.length;d++)c[b[d].ticker+" - "+b[d].name]="/images/"+b[d].type+".png";$(".autocomplete-content:not(:last)").remove(),$("input.autocomplete").autocomplete({data:c,limit:30})}})},clearSearch:function(){$("input.autocomplete").val(""),this.hideDD()},showDD:function(){$(".dropdown-content").show()},hideDD:function(){$(".dropdown-content").hide();
},remove:function(){this.undelegateEvents()}})}(),OnePebbleApp.Views=OnePebbleApp.Views||{},function(){"use strict";OnePebbleApp.Views.Fund=Backbone.View.extend({template:JST["app/scripts/templates/fund.ejs"],tagName:"div",model:OnePebbleApp.Models.Fund,collection:OnePebbleApp.Collections.Funds,className:"",events:{dblclick:"clickit","click .card":"goToFund"},goToFund:function(a){var b=this.getTicker(a);return b?void Backbone.history.navigate("fund/"+b,{trigger:!0}):!1},getTicker:function(a){var b=$(a.currentTarget).data("id");return b?b:!1},initialize:function(a){console.log(a.id),this.model=new this.model({ticker:a.id}),this.model.fetch({beforeSend:function(a){},reset:!0,data:{}}).done(function(a){console.log(this.data=a)}),this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),this.$el.on("click",this.clickit),console.log(this.model.attributes)},render:function(){return this.$el.html(this.template({iconSet:this.iconSet,fund:this.model.toJSON()})),$("main").html(this.$el.html()),$(window).scrollTop(0),this.typeahead(),this.tooltip(),this.trigger("render","render done!"),this},tooltip:function(){$(".tip").tipr()},typeahead:function(){var a=new OnePebbleApp.Views.Search({el:$(".nav-wrapper"),enableBrand:!0});a.render()},iconSet:{"Taxable Money Market":"attach_money","Unknown Category":"battery_unknown","Nontraditional Bond":"multiline_chart","Retirement Target Portfolio":"pie_chart","U.S. Large Blend":"equalizer","U.S. Mid-Cap Blend":"insert_chart","U.S. Small Blend":"bubble_chart","Aggressive Allocation Portfolio":"trending_up","Foreign Large Growth":"multiline_chart","default":"pie_chart_outlined"},remove:function(){this.undelegateEvents()}})}(),OnePebbleApp.Views=OnePebbleApp.Views||{},function(){"use strict";OnePebbleApp.Views.Funds=Backbone.View.extend({template:JST["app/scripts/templates/funds.ejs"],tagName:"div",model:OnePebbleApp.Models.Fund,collection:OnePebbleApp.Collections.Funds,className:"",events:{"click .close":"clearSearch","click .card":"goToFund","click body":"clickit","click .ticker-container":"clickit","click .clear-all-filters":"clearAllFilters"},clearAllFilters:function(){var a=document.location.href.split("?");document.location.href=a[0]},clickit:function(){},getTicker:function(a){var b=$(a.currentTarget).data("id");return b?b:!1},goToFund:function(a){var b=this.getTicker(a);return b?void Backbone.history.navigate("fund/"+b,{trigger:!0}):!1},initialize:function(a){var b=arguments[0].id;if(a instanceof this.collection)this.collection=a;else{this.collection=new this.collection(b),this.collection.params=a.params;var c=$.param(a.params);this.collection.fetch({beforeSend:function(a){},reset:!0,data:c})}this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"change",this.render)},render:function(){return this.$el.html(this.template({funds:this.collection.toJSON(),searchId:this.id,filter:this.collection.params,companyName:window.company,iconSet:this.iconSet})),$("main").html(this.$el.html()),0===Object.keys(this.collection.params).length&&$(window).scrollTop(0),this.typeahead(),this.selectInit(),this.filter(this.collection.params),this.trigger("render","render done!"),this},selectInit:function(){var a=$("#category-dd"),b=$("#focus-dd"),c=$("#niche-dd"),d=$("#brand-dd");a.material_select();var e=document.location.href.split("?"),f=e[1]?this.parseQueryString(e[1]):null;f&&(f.category&&a.val(f.category),f.focus&&b.val(f.focus),f.niche&&c.val(f.niche),f.brand&&d.val(f.brand)),a.material_select(),b.material_select(),c.material_select(),d.material_select()},setFilterRanges:function(a){var b={fundSize_min:a.fundSize_min||0,fundSize_max:a.fundSize_max||25e10,expense_min:a.expense_min||0,expense_max:a.expense_max||300,returns_min:a.returns_min||-.002097,returns_max:a.returns_max||.780195,dividend_min:a.dividend_min||0,dividend_max:a.dividend_max||.310594};return b},filter:function(a){var b=document.getElementById("fund-size-slider"),c=document.getElementById("category-dd"),d=document.getElementById("focus-dd"),e=document.getElementById("niche-dd"),f=document.getElementById("brand-dd"),g=document.getElementById("expense-slider"),h=document.getElementById("returns-slider"),i=document.getElementById("dividend-slider"),j=this.setFilterRanges(a),k=wNumb({mark:".",thousand:",",prefix:"$ "});noUiSlider.create(b,{start:[j.fundSize_min,j.fundSize_max],connect:!0,orientation:"horizontal",range:{min:0,"20%":11563499,"40%":61229739,"60%":252517086,"80%":1111881807,max:25e10},format:wNumb({decimals:2})});var l=[document.getElementById("fund-size-lower"),document.getElementById("fund-size-upper")];b.noUiSlider.on("update",function(a,b){l[b].innerHTML=k.to(parseInt(a[b],10))});var m=this;b.noUiSlider.on("update",function(a){m.filterResults(a,"fundSize",!0)}),$(c).on("change",function(a){m.filterResults([a.currentTarget.value],"category",!1)}),$(d).on("change",function(a){m.filterResults([a.currentTarget.value],"focus",!1)}),$(e).on("change",function(a){m.filterResults([a.currentTarget.value],"niche",!1)}),$(f).on("change",function(a){m.filterResults([a.currentTarget.value],"brand",!1)}),noUiSlider.create(g,{start:[j.expense_min,j.expense_max],connect:!0,orientation:"horizontal",range:{min:0,"20%":24,"40%":52,"60%":84,"80%":129,max:300},format:wNumb({decimals:2})});var n=[document.getElementById("expense-lower"),document.getElementById("expense-upper")];g.noUiSlider.on("update",function(a,b){n[b].innerHTML=parseInt(a[b],10)/100+"%"}),g.noUiSlider.on("update",function(a){m.filterResults(a,"expense",!0)}),noUiSlider.create(h,{start:[j.returns_min,j.returns_max],connect:!0,orientation:"horizontal",range:{min:-.002097,"20%":.004831,"40%":.086794,"60%":.14432,"80%":.161686,max:.780195},format:wNumb({decimals:4})});var o=[document.getElementById("returns-lower"),document.getElementById("returns-upper")];h.noUiSlider.on("update",function(a,b){o[b].innerHTML=(100*a[b]).toFixed(2)+"%"}),h.noUiSlider.on("update",function(a){m.filterResults(a,"returns",!0)}),noUiSlider.create(i,{start:[j.dividend_min,j.dividend_max],connect:!0,orientation:"horizontal",range:{min:0,"20%":.009238,"40%":.014383,"60%":.01965,"80%":.031227,max:.310594},format:wNumb({decimals:4})});var p=[document.getElementById("dividend-lower"),document.getElementById("dividend-upper")];i.noUiSlider.on("update",function(a){m.filterResults(a,"dividend",!0)}),i.noUiSlider.on("update",function(a,b){p[b].innerHTML=(100*a[b]).toFixed(2)+"%"})},filterResults:_.debounce(function(a,b,c){var d,e,f,g={},h=document.location.href.split("?"),i=h[1]?this.parseQueryString(h[1]):null,j=this.setFilterRanges([]);if(console.log(a,b,c),!i){if(c&&j[b+"_min"].toFixed(4)===parseFloat(a[0]).toFixed(4)&&j[b+"_max"].toFixed(4)===parseFloat(a[1]).toFixed(4))return;if(j[b]===a[0])return}c?(g[b+"_min"]=a[0],g[b+"_max"]=a[1]):g[b]=a[0],_.each(g,function(a,b){d+=this.insertParam(b,a)},this),e=d.split("&"),e.shift(),d=e.join("&"),d=this.parseQueryString(d),i?(_.each(d,function(a,b){i[b]=d[b]},this),f=i):f=d,f=this.serializeQueryObject(f),document.location.href=h[0]+"?"+f},300),insertParam:function(a,b){a=encodeURI(a),b=encodeURI(b);for(var c,d=document.location.search.substr(1).split("&"),e=d.length;e--;)if(c=d[e].split("="),c[0]==a){c[1]=b,d[e]=c.join("=");break}return 0>e&&(d[d.length]=[a,b].join("=")),d.join("&")},iconSet:{"Taxable Money Market":"attach_money","Unknown Category":"battery_unknown","Nontraditional Bond":"multiline_chart","Retirement Target Portfolio":"pie_chart","U.S. Large Blend":"equalizer","U.S. Mid-Cap Blend":"insert_chart","U.S. Small Blend":"bubble_chart","Aggressive Allocation Portfolio":"trending_up","Foreign Large Growth":"multiline_chart","default":"pie_chart_outlined"},parseQueryString:function(a){var b={};return a&&_.each(_.map(decodeURI(a).split(/&/g),function(a,b){var c=a.split("="),d={};if(c.length>=1){var e=void 0;2==c.length&&(e=c[1]),d[c[0]]=e}return d}),function(a){_.extend(b,a)}),b},serializeQueryObject:function(a,b){var c,d=[];for(c in a)if(a.hasOwnProperty(c)){var e=b?b+"["+c+"]":c,f=a[c];d.push(null!==f&&"object"==typeof f?this.serializeQueryObject(f,e):encodeURIComponent(e)+"="+encodeURIComponent(f))}return d.join("&")},getParameterByName:function(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null},typeahead:function(){var a=new OnePebbleApp.Views.Search({el:$(".nav-wrapper"),enableBrand:!0});a.render()},remove:function(){this.undelegateEvents()}})}(),OnePebbleApp.Routers=OnePebbleApp.Routers||{},function(){"use strict";OnePebbleApp.Routers.All=Backbone.Router.extend({routes:{"":"home","fund/":"fund","fund/:id":"fund","funds/":"funds","funds/company/:id?*queryString":"funds","funds/company/:id":"funds",doctor:"main"},initialize:function(){},home:function(){var a=new OnePebbleApp.Views.Search({el:$(".nav-wrapper")});a.render()},main:function(){new OnePebbleApp.Views.Doctor},fund:function(a){new OnePebbleApp.Views.Fund({id:a,el:$("body")})},funds:function(a,b){var c=b?this.parseQueryString(b):"";new OnePebbleApp.Views.Funds({el:$("body"),id:a,params:c})},parseQueryString:function(a){var b={};return a&&_.each(_.map(decodeURI(a).split(/&/g),function(a,b){var c=a.split("="),d={};if(c.length>=1){var e=void 0;2==c.length&&(e=c[1]),d[c[0]]=e}return d}),function(a){_.extend(b,a)}),b},showPosts:function(a,b){this.parseQueryString(b)}}),OnePebbleApp.Routers.Router=new OnePebbleApp.Routers.All,Backbone.history.start()}();